{% extends 'ppg/base.html' %}

{% block title %}SETUP{% endblock %}

{% block content %}


<div class="mt-4">
    <div class="row">
        <div class="col text-center mb-4">
            <h5 class="mb-0 text-primary">Setup</h5>
        </div>
    </div>
    <hr>

    {% with sucesso = get_flashed_messages(category_filter=["sucesso"]) %}
    {% if sucesso %}
    {%- for msg in sucesso %}
    <div class="row justify-content-center">
        <div class="col-auto">
            <div class="alert alert-primary alert-dismissible fade show" role="alert">
                {{msg}}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>
    </div>
    {% endfor -%}
</div>
{% endif %}
{% endwith %}
</div>




<div class="row row-cols-3 justify-content-between">
    <div class="col-auto col-sm-12 col-md-12 col-xl-8 col-xxl-8 offset-xl-2 offset-xxl-2 text-center mb-4">
        <div class="row">
            <div class="col align-self-center">
                <select id="idIes" class="form-select">
                    {{html | safe}}
                </select>
            </div>
            <div class="col-4 align-self-center">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="cb_seleciona_todas">
                    <label class="form-check-label" for="cb_seleciona_todas">Selecionar todas as instituições</label>
                  </div>
            </div>
        </div>
    </div>
    <div class="col-auto col-sm-12 col-md-12 col-xl-8 col-xxl-8 offset-xl-2 offset-xxl-2 text-center mb-4">
        <div class="card shadow border-start-primary py-2">
            <div class="card-body">
                <h5 class="card-title">Coletar Currículos Lattes</h5>
                <hr>
                <div class="row align-items-center no-gutters">
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Total</span></div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="ccl-total">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Procesados com
                                sucesso</span>
                        </div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="ccl-sucessos">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Não processados</span></div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="ccl-pendentes">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Erros</span></div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="ccl-erros">0</span></div>
                    </div>
                </div>
                <hr>
                <div class="row" style="margin-left: 50px; margin-right: 50px;">
                    <div class="col-auto"><button class="btn btn-danger" type="button" id="bt-baixar-curriculos" onclick="baixarCurriculos()">Iniciar tarefa</button></div>
                    <div class="col align-self-center">
                        <div class="row">
                            <div class="col-lg-12 text-start">
                                <div class="progress">
                                    <div class="progress-bar" id="progresso-coletar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                                        style="width: 0%;">0%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="w-100"></div>
    <div class="w-100"></div>
</div>

<div class="row row-cols-3 justify-content-between">
    <div class="col-auto col-sm-12 col-md-12 col-xl-8 col-xxl-8 offset-xl-2 offset-xxl-2 text-center mb-4">
        <div class="card shadow border-start-primary py-2">
            <div class="card-body">
                <h5 class="card-title">Processar Currículos Lattes</h5>
                <hr>
                <div class="row align-items-center no-gutters">
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Total</span></div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="pcl-total">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Procesados com
                                sucesso</span>
                        </div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="pcl-sucessos">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Não processados</span></div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="pcl-pendentes">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Erros</span></div>
                        <div class="text-dark fw-bold h5 mb-0"><span id="pcl-erros">0</span></div>
                    </div>
                </div>
                <hr>
                <div class="row" style="margin-left: 50px; margin-right: 50px;">
                    <div class="col-auto"><button class="btn btn-danger" type="button" id="bt-processar-curriculos" onclick="processarCurriculos()">Iniciar tarefa</button></div>
                    <div class="col align-self-center">
                        <div class="row">
                            <div class="col-lg-12 text-start">
                                <div class="progress">
                                    <div class="progress-bar" id="progresso-processar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                                        style="width: 0%;">0%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="w-100"></div>
    <div class="w-100"></div>
</div>

<div class="row row-cols-3 justify-content-between">
    <div class="col-auto col-sm-12 col-md-12 col-xl-8 col-xxl-8 offset-xl-2 offset-xxl-2 text-center mb-4">
        <div class="card shadow border-start-primary py-2">
            <div class="card-body">
                <h5 class="card-title" id="titulo-card-restaurar-cache">Restaurar cache</h5>
                <hr>
                <div class="row align-items-center no-gutters">
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Indicadores</span></div>
                        <div class="text-dark fw-bold mb-0"><span id="rcache-indicadores">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Docentes</span>
                        </div>
                        <div class="text-dark fw-bold mb-0"><span id="rcache-docentes">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Projetos</span></div>
                        <div class="text-dark fw-bold mb-0"><span id="rcache-projetos">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Bancas</span></div>
                        <div class="text-dark fw-bold mb-0"><span id="rcache-bancas">0</span></div>
                    </div>
                    <div class="col me-2">
                        <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Artigos correlatos</span></div>
                        <div class="text-dark fw-bold mb-0"><span id="rcache-correlatos">0</span></div>
                    </div>
                </div>
                <hr>
                <div class="row" style="margin-left: 50px; margin-right: 50px; margin-top:10px">
                    <div class="col-4"><button class="btn btn-danger" type="button" id="bt-restaurar-cache-indicadores" onclick="restaurarCache('indicadores','indicadores-tab')">Iniciar indicadores</button></div>
                    <div class="col align-self-center">
                        <div class="row">
                            <div class="col-lg-12 text-start">
                                <div class="progress">
                                    <div class="progress-bar" id="progresso-restaurar-cache-indicadores" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                                        style="width: 0%;">0%</div><br>
                                </div>
                                <small id="id-ppg-indicadores"></small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-left: 50px; margin-right: 50px; margin-top:10px">
                    <div class="col-4"><button class="btn btn-danger" type="button" id="bt-restaurar-cache-docentes" onclick="restaurarCache('docentes','docentes-tab')">Iniciar docentes</button></div>
                    <div class="col align-self-center">
                        <div class="row">
                            <div class="col-lg-12 text-start">
                                <div class="progress">
                                    <div class="progress-bar" id="progresso-restaurar-cache-docentes" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                                        style="width: 0%;">0%</div><br>
                                    </div>
                                    <small id="id-ppg-docentes"></small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-left: 50px; margin-right: 50px; margin-top:10px">
                    <div class="col-4"><button class="btn btn-danger" type="button" id="bt-restaurar-cache-projetos" onclick="restaurarCache('projetos','projetos-tab')">Iniciar projetos</button></div>
                    <div class="col align-self-center">
                        <div class="row">
                            <div class="col-lg-12 text-start">
                                <div class="progress">
                                    <div class="progress-bar" id="progresso-restaurar-cache-projetos" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                                        style="width: 0%;">0%</div><br>
                                    </div>
                                    <small id="id-ppg-projetos"></small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-left: 50px; margin-right: 50px; margin-top:10px">
                    <div class="col-4"><button class="btn btn-danger" type="button" id="bt-restaurar-cache-bancas" onclick="restaurarCache('bancas','bancas-tab')">Iniciar bancas</button></div>
                    <div class="col align-self-center">
                        <div class="row">
                            <div class="col-lg-12 text-start">
                                <div class="progress">
                                    <div class="progress-bar" id="progresso-restaurar-cache-bancas" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                                        style="width: 0%;">0%</div><br>
                                    </div>
                                    <small id="id-ppg-bancas"></small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-left: 50px; margin-right: 50px; margin-top:10px">
                    <div class="col-4"><button class="btn btn-danger" type="button" id="bt-restaurar-cache-correlatos" onclick="restaurarCache('correlatos', 'indicadores-tab-correlatos')">Iniciar correlatos</button></div>
                    <div class="col align-self-center">
                        <div class="row">
                            <div class="col-lg-12 text-start">
                                <div class="progress">
                                    <div class="progress-bar" id="progresso-restaurar-cache-correlatos" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                                        style="width: 0%;">0%</div><br>
                                    </div>
                                    <small id="id-ppg-correlatos"></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="w-100"></div>
    <div class="w-100"></div>
</div>


{% endblock %}

{% block modais %}

{% endblock %}



{% block scripts %}
<script src="{{ url_for('static', filename='ppg/js/scriptstask.js') | hash_url}}"></script>
{% endblock %}


</body>

</html>