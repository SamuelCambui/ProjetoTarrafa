{% extends 'ppg/base.html' %} {% block title %}Setup{% endblock %} {% block
content %}
<div class="mx-auto max-w-screen-2xl">
  <h1 class="pb-6 text-2xl font-extrabold text-indigo-500">Setup</h1>

  {% with sucesso = get_flashed_messages(category_filter=["sucesso"]) %} {% if
  sucesso %} {%- for msg in sucesso %}
  <div class="" role="alert">
    {{msg}}
    <button
      type="button"
      class="btn-fechar"
      data-bs-dismiss="alert"
      aria-label="Fechar"
    ></button>
  </div>
  {% endfor -%} {% endif %} {% endwith %}

  <div class="flex flex-wrap justify-between">
    <div class="relative w-fit">
      <select class="w-full pr-10" id="idIes">
        {{html | safe}}
      </select>
      <div
        class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-zinc-500"
      >
        <svg
          class="lucide lucide-chevrons-up-down"
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="m7 15 5 5 5-5"></path>
          <path d="m7 9 5-5 5 5"></path>
        </svg>
      </div>
    </div>
    <div class="flex flex-col gap-3">
      <label class="mr-1"> Selecionar todas as instituições? </label>
      <label class="inline-flex cursor-pointer items-center">
        <span class="me-3 text-sm font-medium text-zinc-700">Não</span>
        <input
          class="peer sr-only"
          id="cb_seleciona_todas"
          type="checkbox"
          checked
        />
        <div
          class="peer relative h-6 w-11 rounded-full bg-gray-300 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-indigo-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rtl:peer-checked:after:-translate-x-full"
          id="checkbox-senha"
        ></div>
        <span class="ms-3 text-sm font-medium text-zinc-700">Sim</span>
      </label>
    </div>
  </div>

  <div class="mx-auto my-8 max-w-4xl space-y-8 p-4">
    <div class="rounded-lg bg-white px-6 py-4 shadow">
      <h2 class="text-xl font-bold text-amber-700">
        Coletar Currículos Lattes Docentes
      </h2>
      <div class="my-4 grid grid-cols-1 gap-4 md:grid-cols-4">
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Total
          </div>
          <div class="text-zinc-700"><span id="ccl-total">0</span></div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Processados com sucesso
          </div>
          <div class="text-zinc-700"><span id="ccl-sucessos">0</span></div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Não processados
          </div>
          <div class="text-zinc-700"><span id="ccl-pendentes">0</span></div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Erros
          </div>
          <div class="text-zinc-700"><span id="ccl-erros">0</span></div>
        </div>
      </div>

      <div class="flex items-center space-x-4">
        <button
          class="rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          id="bt-baixar-curriculos"
          onclick="baixarCurriculos()"
        >
          Iniciar tarefa
        </button>
        <div class="flex-grow">
          <div class="">
            <div
              class="mb-2 flex items-center justify-between text-xs font-semibold uppercase text-blue-600"
            >
              <div class="text-zinc-700">Progresso</div>
              <div class="text-zinc-700">0%</div>
            </div>
            <div class="">
              <div class="w-full rounded-full bg-gray-200">
                <div
                  class="w-0 rounded-full bg-sky-700 text-center text-xs font-medium leading-none text-zinc-700"
                  id="progresso-coletar"
                >
                  0%
                </div>
              </div>
            </div>
          </div>
        </div>
        <button
          class="rounded-lg bg-indigo-400 p-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          data-bs-toggle="tooltip"
          data-bs-placement="right"
          title="refresh"
          onclick="recarregarBarraProgresso('baixar_curriculos_docentes', 'progresso-coletar', 'ccl');"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-rotate-cw"
          >
            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
          </svg>
        </button>
      </div>
    </div>

    <div class="rounded-lg bg-white px-6 py-4 shadow">
      <h2 class="text-xl font-bold text-amber-700">
        Processar Currículos Lattes Docentes
      </h2>
      <div class="my-4 grid grid-cols-1 gap-4 md:grid-cols-4">
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Total
          </div>
          <div class="text-zinc-700"><span id="pcl-total">0</span></div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Processados com sucesso
          </div>
          <div class="text-zinc-700"><span id="pcl-sucessos">0</span></div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Não processados
          </div>
          <div class="text-zinc-700"><span id="pcl-pendentes">0</span></div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Erros
          </div>
          <div class="text-zinc-700"><span id="pcl-erros">0</span></div>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <button
          class="rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          id="bt-processar-curriculos"
          onclick="processarCurriculos()"
        >
          Iniciar tarefa
        </button>
        <div class="flex-grow">
          <div class="relative pt-1">
            <div
              class="mb-2 flex items-center justify-between text-xs font-semibold uppercase text-blue-600"
            >
              <div class="text-zinc-700">Progresso</div>
              <div class="text-zinc-700">0%</div>
            </div>
            <div class="">
              <div class="w-full rounded-full bg-gray-200 p-0.5">
                <div
                  class="w-0 rounded-full bg-sky-700 text-center text-xs font-medium leading-none text-zinc-700"
                  id="progresso-processar"
                >
                  0%
                </div>
              </div>
            </div>
          </div>
        </div>
        <button
          class="rounded-lg bg-indigo-400 p-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          data-bs-toggle="tooltip"
          data-bs-placement="right"
          title="refresh"
          onclick="recarregarBarraProgresso('processar_curriculos_docentes', 'progresso-processar', 'pcl');"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-rotate-cw"
          >
            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
          </svg>
        </button>
      </div>
    </div>

    <div class="rounded-lg bg-white px-6 py-4 shadow">
      <h2 class="text-xl font-bold text-amber-700">
        Coletar Currículos Lattes Egressos
      </h2>
      <div class="my-4 grid grid-cols-1 gap-4 md:grid-cols-4">
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Total
          </div>
          <div class="text-zinc-700">
            <span id="ccl-egressos-total">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Processados com sucesso
          </div>
          <div class="text-zinc-700">
            <span id="ccl-egressos-sucessos">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Não processados
          </div>
          <div class="text-zinc-700">
            <span id="ccl-egressos-pendentes">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Erros
          </div>
          <div class="text-zinc-700">
            <span id="ccl-egressos-erros">0</span>
          </div>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <button
          class="rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          id="bt-baixar-curriculos-egressos"
          onclick="baixarCurriculosEgressos()"
        >
          Iniciar tarefa
        </button>
        <div class="flex-grow">
          <div class="relative pt-1">
            <div
              class="mb-2 flex items-center justify-between text-xs font-semibold uppercase text-blue-600"
            >
              <div class="text-zinc-700">Progresso</div>
              <div class="text-zinc-700">0%</div>
            </div>
            <div class="flex">
              <div class="w-full rounded-full bg-gray-200 p-0.5">
                <div
                  class="w-0 rounded-full bg-sky-700 text-center text-xs font-medium leading-none text-zinc-700"
                  id="progresso-coletar-egressos"
                >
                  0%
                </div>
              </div>
            </div>
          </div>
        </div>
        <button
          class="rounded-lg bg-indigo-400 p-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          data-bs-toggle="tooltip"
          data-bs-placement="right"
          title="refresh"
          onclick="recarregarBarraProgresso('baixar_curriculos_egressos', 'progresso-coletar-egressos', 'ccl-egressos');"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-rotate-cw"
          >
            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
          </svg>
        </button>
      </div>
    </div>

    <div class="rounded-lg bg-white px-6 py-4 shadow">
      <h2 class="text-xl font-bold text-amber-700">
        Processar Currículos Lattes Egressos
      </h2>
      <div class="my-4 grid grid-cols-1 gap-4 md:grid-cols-4">
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Total
          </div>
          <div class="text-zinc-700">
            <span id="pcl-egressos-total">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Processados com sucesso
          </div>
          <div class="text-zinc-700">
            <span id="pcl-egressos-sucessos">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Não processados
          </div>
          <div class="text-zinc-700">
            <span id="pcl-egressos-pendentes">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Erros
          </div>
          <div class="text-zinc-700">
            <span id="pcl-egressos-erros">0</span>
          </div>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <button
          class="rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          id="bt-processar-curriculos-egressos"
          onclick="processarCurriculosEgressos()"
        >
          Iniciar tarefa
        </button>
        <div class="flex-grow">
          <div class="relative pt-1">
            <div
              class="mb-2 flex items-center justify-between text-xs font-semibold uppercase text-blue-600"
            >
              <div class="text-zinc-700">Progresso</div>
              <div class="text-zinc-700">0%</div>
            </div>
            <div class="flex">
              <div class="w-full rounded-full bg-gray-200 p-0.5">
                <div
                  class="w-0 rounded-full bg-sky-700 text-center text-xs font-medium leading-none text-zinc-700"
                  id="progresso-processar-egressos"
                >
                  0%
                </div>
              </div>
            </div>
          </div>
        </div>
        <button
          class="rounded-lg bg-indigo-400 p-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          data-bs-toggle="tooltip"
          data-bs-placement="right"
          title="refresh"
          onclick="recarregarBarraProgresso('processar_curriculos_egressos', 'progresso-processar-egressos', 'pcl-egressos');"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-rotate-cw"
          >
            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
          </svg>
        </button>
      </div>
    </div>

    <div class="rounded-lg bg-white px-6 py-4 shadow">
      <h2
        class="text-xl font-bold text-amber-700"
        id="titulo-card-restaurar-cache"
      >
        Restaurar cache
      </h2>
      <div class="my-4 grid grid-cols-1 gap-4 md:grid-cols-4">
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Total
          </div>
          <div class="text-zinc-700"><span id="rcache-total">0</span></div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Sucessos
          </div>
          <div class="text-zinc-700">
            <span id="rcache-sucessos">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Pendentes
          </div>
          <div class="text-zinc-700">
            <span id="rcache-pendentes">0</span>
          </div>
        </div>
        <div class="mx-auto flex flex-col items-center">
          <div class="text-center text-sm font-bold uppercase text-indigo-950">
            Erros
          </div>
          <div class="text-zinc-700"><span id="rcache-erros">0</span></div>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <button
          class="rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          id="btn-restaurar-cache"
          onclick="restaurarCache()"
        >
          Restaurar cache
        </button>
        <div class="flex-grow">
          <div class="relative pt-1">
            <div
              class="mb-2 flex items-center justify-between text-xs font-semibold uppercase text-blue-600"
            >
              <div class="text-zinc-700">Progresso</div>
              <div class="text-zinc-700">0%</div>
            </div>
            <div class="flex">
              <div class="w-full rounded-full bg-gray-200 p-0.5">
                <div
                  class="w-0 rounded-full bg-sky-700 text-center text-xs font-medium leading-none text-zinc-700"
                  id="progresso-restaurar-cache"
                >
                  0%
                </div>
              </div>
            </div>
          </div>
        </div>
        <button
          class="rounded-lg bg-indigo-400 p-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          type="button"
          data-bs-toggle="tooltip"
          data-bs-placement="right"
          title="refresh"
          onclick="recarregarBarraProgresso('restaurar_cache', 'progresso-restaurar-cache', 'rcache');"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-rotate-cw"
          >
            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  {% endblock %} {% block modais %} {% endblock %} {% block scripts %}
  <script src="{{ url_for('static', filename='ppg/js/scriptstask.js') | hash_url}}"></script>
  {% endblock %}
</div>
