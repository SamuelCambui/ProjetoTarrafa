{% extends 'ppg/base.html' %}

{% block title %}PPG{% endblock %}

{% block content %}

<div class="row p-4" style="font-size:12px;">
    <ul class="col-8 nav nav-tabs nav-fill" id="myTab" role="tablist">

        <li class="nav-item" role="presentation">
            <div id="status-carregamento-indicadores-tab">
                <button class="nav-link active" id="indicadores-tab" data-bs-toggle="tab" data-bs-target="#indicadores"
                    type="button" role="tab" aria-controls="indicadores" aria-selected="false">Indicadores</button>
            </div>
        </li>
    </ul>
</div>

<div style="padding-top:0px;">
    <div class="tab-content" id="myTabContent">

        <div class="tab-pane fade show active" id="indicadores" role="tabpanel" aria-labelledby="indicadores-tab">

            <div class="row" id="row-qualis" style="padding-top: 0px;">
                <div class="col-xl-8 col-lg-8" id="col-indprod">
                    <div class="card shadow mb-4" style="height: 469px;">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div style="width: 100%;">
                                <div class="row justify-content-between">
                                    <div class="col-auto">
                                        <h6 id="modaltitlechartindprodsproductions" class="text-primary fw-bold m-0">
                                            IndProd Artigos</h6>
                                    </div>
                                    <div class="col text-end">
                                        <div class="dropdown no-arrow">
                                            <button class="btn btn-link btn-sm dropdown-toggle" aria-expanded="false"
                                                data-bs-toggle="dropdown" type="button"><i
                                                    class="fas fa-ellipsis-v text-gray-400"></i></button>
                                            <div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
                                                <p class="text-center dropdown-header">
                                                    Opções:</p>
                                                <a class="dropdown-item open-chart-modal" id="saveGraph-2" href="#"
                                                    data-value="chartindprodsproductions">&nbsp;Ampliar</a>
                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item a-pointer"
                                                    onclick="SaveChart('chartindprodsproductions')">&nbsp;<i
                                                        class="fa fa-download"></i> Download
                                                    gráfico</a>
                                                <a class="dropdown-item a-pointer"
                                                    onclick="ExportToExcel('/api/dados/ppg/indicadores/indprodart', 'chartindprodsproductions')">&nbsp;<i
                                                        class="far fa-file-excel"></i>
                                                    Exportar para .xlsx</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col"><sub style="font-size: 11px;">
                                            <span id="formula_indprod">IndProdArt = (1*A1 + 0,875*A2
                                                + 0,75*A3
                                                + 0,625*A4 + 0,5*B1
                                                + 0,375*B2 + 0,25*B3 + 0,125*B4)/DP</span></sub>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body" style="height: 397px;">
                            <canvas class="chart-area" id="chartindprodsproductions"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xl-8 col-lg-8" id="col-qualis">
                    <div class="card shadow mb-4" style="height: 469px;">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div style="width: 100%;">
                                <div class="row justify-content-between">
                                    <div class="col-auto">
                                        <h6 id="modaltitlechartqualisproductions" class="text-primary fw-bold m-0">
                                            Produção Docente com
                                            Qualis</h6>
                                    </div>
                                    <div class="col text-end">
                                        <div class="dropdown no-arrow">
                                            <button class="btn btn-link btn-sm dropdown-toggle" aria-expanded="false"
                                                data-bs-toggle="dropdown" type="button"><i
                                                    class="fas fa-ellipsis-v text-gray-400"></i></button>
                                            <div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
                                                <p class="text-center dropdown-header">
                                                    Opções:</p>
                                                <a class="dropdown-item open-chart-modal" id="saveGraph-2" href="#"
                                                    data-value="chartqualisproductions">&nbsp;Ampliar</a>
                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item a-pointer"
                                                    onclick="SaveChart('chartqualisproductions')">&nbsp;<i
                                                        class="fa fa-download"></i> Download
                                                    gráfico</a>
                                                <a class="dropdown-item a-pointer"
                                                    onclick="ExportToExcel('/api/dados/prp/geral/producoes/periodicos/qualis', 'chartqualisproductions')">&nbsp;<i
                                                        class="far fa-file-excel"></i>
                                                    Exportar para .xlsx</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col"><sub style="font-size: 11px;">Este
                                            gráfico apresenta
                                            quantidade de artigos em periódicos (com qualis)
                                            dos docentes permanentes do programa.</sub></div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body" style="height: 397px;">
                            <canvas class="chart-area" id="chartqualisproductions"></canvas>
                        </div>
                    </div>
                </div>

                
            </div>

            
        </div>
</div>

{% endblock %}


{% block modais %}

<!-- Tabela cujo dados são importados para serem exportados posteriormente -->
<table id="chartTable" hidden>
    <thead id="chartTableHead">

    </thead>
    <tbody id="chartTableBody">

    </tbody>
</table>

<!-- Modal Charts (Único para todos) -->
<div class="modal fade" id="chartModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="modalTitle" class="text-primary fw-bold m-0"></h5>
            </div>
            <div id="modalBody" class="card-body">
                <!-- Gráfico aqui -->
            </div>
            <div id="modalFooter" class="modal-footer">
                <button id="closeChartModal" type="button" class="btn btn-secondary">Fechar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para currículo lates-->
<div class="modal fade" id="modal_resumo_lattes" tabindex="-1" role="dialog" aria-labelledby="modal_resumo_label"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal_resumo_label">Meu Modal de 80%</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div style="max-height: 70vh; overflow-y: auto;">

                    <p>Conteúdo longo...</p>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>






<div class="modal fade" id="listaArtigosModal" tabindex="-1" aria-labelledby="listaArtigosModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="listaArtigosModalLabel">Lista de Artigos de</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" id="closeModal" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='ppg/js/charts.js') | hash_url }}"></script>
<script src="{{ url_for('static', filename='ppg/js/scriptsppg.js') | hash_url }}"></script>
{% endblock %}
<!--| hash_url-->
</body>

</html>