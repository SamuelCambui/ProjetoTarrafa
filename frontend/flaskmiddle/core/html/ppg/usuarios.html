{% extends 'ppg/base.html' %} {% block title %}Usuários dos Sistema{% endblock
%} {% block content %}
<div class="mx-auto max-w-screen-2xl">
  <div>
    <h1 class="pb-8 text-2xl font-extrabold text-indigo-500">
      Lista de usuários do sistema
    </h1>

    {% with sucesso = get_flashed_messages(category_filter=["sucesso"]) %} {% if
    sucesso %} {%- for msg in sucesso %}
    <div
      class="mb-4 rounded-b border-t-4 border-indigo-500 bg-indigo-100 px-4 py-3 text-indigo-900 shadow-md"
      id="msg-alerta"
      role="alert"
    >
      <div class="flex">
        <div class="py-1">
          <svg
            class="mr-4 h-6 w-6 fill-current text-indigo-500"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
          >
            <path
              d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"
            ></path>
          </svg>
        </div>
        <div class="flex-1">
          <p class="font-bold">Aviso</p>
          <p class="text-sm">{{msg}}</p>
        </div>
        <button class="rounded-full p-2" type="button" id="btn-fechar-msg">
          <svg
            class="h-6 w-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            ></path>
          </svg>
          <title>Fechar</title>
        </button>
      </div>
    </div>
    {% endfor -%} {% endif %} {% endwith %}

    <div>
      <div class="flex flex-wrap justify-between gap-4">
        <form class="flex-1" id="editar">
          <div class="relative min-w-40 md:max-w-lg">
            <div
              class="pointer-events-none absolute inset-y-0 left-4 flex items-center text-zinc-500"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.3-4.3"></path>
              </svg>
            </div>
            <input
              class="w-full pl-12"
              id="buscar-usuario"
              type="text"
              placeholder="Nome, ID Lattes ou E-mail"
            />
          </div>
        </form>
        {% if current_user.is_admin != false or current_user.is_superuser !=
        false %}
        <button
          class="flex items-center gap-2 rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-zinc-50 hover:bg-indigo-500"
          id="btn-novo-usuario"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-user-round-plus"
          >
            <path d="M2 21a8 8 0 0 1 13.292-6" />
            <circle cx="10" cy="8" r="5" />
            <path d="M19 16v6" />
            <path d="M22 19h-6" />
          </svg>
          Novo usuário
        </button>
        {% endif %}
      </div>

      <div
        class="mt-8 overflow-x-auto text-zinc-700"
        id="dataTable"
        role="table"
        aria-describedby="dataTable_info"
      >
        <table class="w-full table-auto" id="dataTable">
          <thead>
            <tr class="border-y-2 border-y-gray-300">
              <th class="px-3 py-3.5 text-left font-semibold" scope="col">
                Nome do usuário
              </th>
              <th class="px-3 py-3.5 text-left font-semibold" scope="col">
                ID Lattes
              </th>
              <th class="px-3 py-3.5 text-left font-semibold" scope="col">
                E-mail
              </th>
              <th class="px-3 py-3.5 text-left font-semibold" scope="col">
                Perfil
              </th>
              <th class="px-3 py-3.5 text-left font-semibold" scope="col">
                Ativo
              </th>
              <th class="px-3 py-3.5 text-left font-semibold" scope="col">
                Logado
              </th>
              <th class="px-3 py-3.5 text-left font-semibold" scope="col">
                Ações
              </th>
            </tr>
          </thead>
          <tbody id="tbody-users">
            {% for user in users %} {% if current_user.idlattes == user.idlattes
            %}
            <tr class="border-b border-b-gray-300">
              <td class="px-3 py-3.5">{{user.full_name}}</td>
              <td class="px-3 py-3.5">{{user.idlattes}}</td>
              <td class="px-3 py-3.5">
                {{user.email if user.email is not none else ''}}
              </td>
              <td class="px-3 py-3.5">{{user.perfil}}</td>
              <td class="px-3 py-3.5" id="ativo{{user.idlattes}}">
                {{'Sim' if user.is_active else 'Não'}}
              </td>
              <td class="px-3 py-3.5" id="logado{{user.idlattes}}">
                {{user.logado}}
              </td>
              <td>
                <a
                  class="acoes text-amber-700 hover:text-amber-800"
                  id="btn-alterar-senha"
                  role="button"
                  title="Alterar senha"
                  aria-label="Alterar senha"
                  onclick="alterarSenha('{{user.idlattes}}', {{'true' if current_user.is_superuser else 'false'}}, {{'true' if current_user.is_admin else 'false'}})"
                >
                  Alterar senha
                </a>
              </td>
            </tr>

            {% elif current_user.is_admin or current_user.is_superuser %}
            <tr class="border-b border-b-gray-300">
              <td class="px-3 py-3.5">{{user.full_name}}</td>
              <td class="px-3 py-3.5">{{user.idlattes}}</td>
              <td class="px-3 py-3.5">
                {{user.email if user.email is not none else ''}}
              </td>
              <td class="px-3 py-3.5">{{user.perfil}}</td>
              <td class="px-3 py-3.5" id="ativo{{user.idlattes}}">
                {{'Sim' if user.is_active else 'Não'}}
              </td>
              <td class="px-3 py-3.5" id="logado{{user.idlattes}}">
                {{user.logado}}
              </td>
              <td class="px-3 py-3.5">
                {% if user.is_active %}
                <button
                  class="px-1 text-amber-700 hover:text-amber-800"
                  id="btn-desativar-user"
                  type="button"
                  title="Desativar"
                  aria-label="Desativar"
                  onclick="modificarStatus('{{user.idlattes}}')"
                >
                  <i
                    class="fas fa-user"
                    id="lock{{user.idlattes}}"
                    aria-hidden="true"
                  ></i>
                </button>
                {% else %}
                <button
                  class="px-1 text-amber-700 hover:text-amber-800"
                  type="btn-ativar-user"
                  title="Ativar"
                  aria-label="Ativar"
                  onclick="modificarStatus('{{user.idlattes}}')"
                >
                  <i
                    class="fas fa-user-slash"
                    id="lock{{user.idlattes}}"
                    aria-hidden="true"
                  ></i>
                </button>
                {% endif %}
                <button
                  class="acoes px-1 text-amber-700 hover:text-amber-800"
                  type="button"
                  title="Editar"
                  aria-label="Editar"
                  onclick="obterUsuario('{{user.idlattes}}', {{'true' if current_user.is_superuser else 'false'}}, {{'true' if current_user.is_admin else 'false'}})"
                >
                  <i class="fas fa-edit fa-beat" aria-hidden="true"></i>
                </button>
                {% if current_user.idlattes != user.idlattes %}
                <button
                  class="acoes px-1 text-amber-700 hover:text-amber-800"
                  type="button"
                  title="Excluir"
                  aria-label="Excluir"
                  onclick="apagarUser('{{user.idlattes}}', '{{user.full_name}}')"
                >
                  <i class="fas fa-trash" aria-hidden="true"></i>
                </button>
                {% else %}
                <button
                  class="acoes px-1 text-amber-700 hover:text-amber-800"
                  type="button"
                  title="Excluir"
                  aria-disabled="true"
                  aria-label="Excluir"
                >
                  <i class="fas fa-trash" aria-hidden="true"></i>
                </button>
                {% endif %}
              </td>
            </tr>
            {% endif %} {% endfor %}
          </tbody>
          <tfoot>
            <tr class="border-y-2 border-y-gray-300">
              <th class="px-3 py-3.5 text-left font-semibold">
                Nome do usuário
              </th>
              <th class="px-3 py-3.5 text-left font-semibold">ID Lattes</th>
              <th class="px-3 py-3.5 text-left font-semibold">E-mail</th>
              <th class="px-3 py-3.5 text-left font-semibold">Perfil</th>
              <th class="px-3 py-3.5 text-left font-semibold">Ativo</th>
              <th class="px-3 py-3.5 text-left font-semibold">Logado</th>
              <th class="px-3 py-3.5 text-left font-semibold">Ações</th>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
    {% endblock %} {% block modais %}

    <!-- Modal Novo Usuário -->
    <div
      class="relative z-50"
      role="dialog"
      aria-labelledby="modal-title"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 hidden bg-gray-500 bg-opacity-75 transition-opacity"
        id="modal-novo-user"
        aria-hidden="true"
      ></div>
      <!-- Modal Container -->
      <div
        class="fixed inset-0 z-40 mx-auto hidden w-full max-w-md overflow-y-auto"
        id="conteudo-novo-user"
      >
        <div
          class="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:translate-y-0"
          >
            <!-- Modal Header -->
            <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
              <div class="sm:flex sm:items-start">
                <div
                  class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-indigo-400/60 sm:mx-0 sm:h-10 sm:w-10"
                >
                  <svg
                    class="fill-none stroke-zinc-50"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M2 21a8 8 0 0 1 13.292-6"></path>
                    <circle cx="10" cy="8" r="5"></circle>
                    <path d="M19 16v6"></path>
                    <path d="M22 19h-6"></path>
                  </svg>
                </div>
                <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                  <h2
                    class="text-lg font-semibold leading-6 text-zinc-900"
                    id="modal-title"
                  >
                    Novo Usuário
                  </h2>
                  <div class="mt-2">
                    <p class="text-sm text-zinc-700">
                      A senha padrão do novo usuário é o ID Lattes.
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <form class="px-4 py-3" id="cadastrar" type="submit">
              <div class="mb-3 flex flex-col gap-2">
                <label for="idLattes">ID Lattes:</label>
                <input id="idLattes" type="text" />
              </div>
              <div class="mb-3 flex flex-col gap-2">
                <label for="fullName">Nome completo:</label>
                <input id="fullName" type="text" />
              </div>
              <div class="mb-3 flex flex-col gap-2">
                <label for="email">E-mail:</label>
                <input id="email" type="email" />
              </div>
              <div id="superuserForm">
                {% if current_user.is_superuser %}
                <div class="mb-3 flex flex-col gap-2">
                  <label for="tipo-perfil">Tipo do perfil:</label>
                  <div class="relative inline-block">
                    <select
                      id="tipo-perfil"
                      class="block w-full appearance-none rounded-md border border-gray-300 py-2 pl-3 pr-10 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-500"
                    >
                      <option>Dono</option>
                      <option>Administrador</option>
                      <option selected="">Usuário comum</option>
                    </select>
                    <svg
                      class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 transform"
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="m7 15 5 5 5-5"></path>
                      <path d="m7 9 5-5 5 5"></path>
                    </svg>
                  </div>
                </div>
                <div class="mb-3 flex flex-col gap-2">
                  <label for="id-ies">ID IES</label>
                  <div class="relative">
                    <select
                      id="id-ies"
                      class="block w-full appearance-none rounded-md border border-gray-300 py-2 pl-3 pr-10 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-500"
                    >
                      {{html | safe}}
                    </select>
                    <svg
                      class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 transform"
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="m7 15 5 5 5-5"></path>
                      <path d="m7 9 5-5 5 5"></path>
                    </svg>
                  </div>
                </div>

                {% endif %}
              </div>
            </form>
            <!-- Modal Footer -->
            <div class="px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
              <button
                class="inline-flex w-full justify-center rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-white shadow-sm hover:bg-indigo-500 sm:ml-3 sm:w-auto"
                id="btn-cadastrar"
                type="submit"
                form="cadastrar"
              >
                Cadastrar
              </button>
              <button
                class="mt-3 inline-flex w-full justify-center rounded-lg border border-gray-300 bg-white px-6 py-3 text-sm font-bold text-zinc-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:mt-0 sm:w-auto"
                id="btn-cancela-novo-user"
                type="button"
              >
                Cancelar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal confirma exclusão -->
    <div
      class="relative z-50"
      role="dialog"
      aria-labelledby="modal-title"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 hidden translate-y-0 bg-gray-500 bg-opacity-75 opacity-100 transition-opacity"
        id="modal-exclui-user"
        aria-hidden="true"
      ></div>

      <div
        class="fixed inset-0 z-40 mx-auto hidden w-full max-w-md overflow-y-auto opacity-100"
        id="conteudo-exclui-user"
      >
        <div
          class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:translate-y-0"
        >
          <div class="">
            <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
              <div class="sm:flex sm:items-start">
                <div
                  class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"
                >
                  <svg
                    class="h-6 w-6 text-red-700"
                    aria-hidden="true"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
                    ></path>
                  </svg>
                </div>
                <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                  <h2
                    class="text-lg font-semibold leading-6 text-zinc-900"
                    id="modal-title"
                  >
                    Alerta de Exclusão
                  </h2>
                  <div class="mt-2">
                    <p class="text-zinc-700" id="msg-exclusao"></p>
                  </div>
                </div>
              </div>
            </div>
            <div class="px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
              <button
                class="inline-flex w-full justify-center rounded-lg bg-red-500 px-6 py-3 text-sm font-bold text-white hover:bg-red-700 sm:ml-3 sm:w-auto"
                id="btn-excluir-user"
                type="button"
              >
                Excluir
              </button>
              <button
                class="mt-3 inline-flex w-full justify-center rounded-lg bg-white px-6 py-3 text-sm font-bold text-gray-900 ring-1 ring-inset sm:mt-0 sm:w-auto"
                id="btn-cancela-exclusao-user"
                type="button"
              >
                Cancelar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal editar senha -->
    <div
      class="relative z-50"
      role="dialog"
      aria-labelledby="modal-title"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 hidden bg-gray-500 bg-opacity-75 opacity-0 transition-opacity"
        id="modal-editar-senha-user"
        aria-hidden="true"
      ></div>
      <div
        class="fixed inset-0 z-40 mx-auto hidden w-full max-w-md overflow-y-auto opacity-0 transition-opacity duration-300 ease-out"
        id="conteudo-editar-senha-user"
      >
        <div
          class="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"
          >
            <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
              <div class="sm:flex sm:items-start">
                <div
                  class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-amber-100 sm:mx-0 sm:h-10 sm:w-10"
                >
                  <svg
                    class="h-6 w-6 text-amber-700"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M2 21a8 8 0 0 1 10.821-7.487"></path>
                    <path
                      d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"
                    ></path>
                    <circle cx="10" cy="8" r="5"></circle>
                  </svg>
                </div>
                <div
                  class="mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"
                >
                  <h2
                    class="text-lg font-semibold leading-6 text-zinc-900"
                    id="modal-title"
                  >
                    Alterar Senha
                  </h2>
                  <div class="mt-2">
                    <form id="alterarSenha">
                      <input id="alterarSenhaIdLattes" type="hidden" disabled />
                      <input id="alterarSenhaFullName" type="hidden" />
                      <input id="alterarSenhaEmail" type="hidden" />
                      <div class="mb-3 flex flex-col gap-3">
                        <label for="alterarSenhaPassword"
                          >Inserir nova senha:</label
                        >
                        <div class="relative w-full">
                          <input
                            id="alterarSenhaPassword"
                            name="password"
                            type="password"
                            placeholder="Nova senha"
                            required
                          />
                          <button
                            class="absolute inset-y-0 right-0 flex items-center pr-3"
                            id="senha-usuario"
                            type="button"
                            onclick="mostrarSenhaId('alterarSenhaPassword')"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="rgb(51 53 51)"
                              width="25"
                              height="25"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"
                              ></path>
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                              ></path>
                            </svg>
                          </button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <div class="px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                <button
                  class="inline-flex w-full justify-center rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-white shadow-sm hover:bg-indigo-500 sm:ml-3 sm:w-auto"
                  id="btn-edita-senha-user"
                  type="submit"
                  form="alterarSenha"
                >
                  Salvar
                </button>
                <button
                  class="mt-3 inline-flex w-full justify-center rounded-lg border border-gray-300 bg-white px-6 py-3 text-sm font-bold text-zinc-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:mt-0 sm:w-auto"
                  id="btn-cancela-edicao-senha-user"
                  type="button"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Editar usuário -->
    <div
      class="relative z-50"
      role="dialog"
      aria-labelledby="modal-title"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 hidden bg-gray-500 bg-opacity-75 transition-opacity"
        id="modal-editar-user"
        aria-hidden="true"
      ></div>
      <div
        class="fixed inset-0 z-40 mx-auto hidden w-full max-w-xl overflow-y-auto"
        id="conteudo-editar-user"
      >
        <div
          class="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:translate-y-0"
          >
            <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
              <div class="sm:flex sm:items-start">
                <div
                  class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-amber-100 sm:mx-0 sm:h-10 sm:w-10"
                >
                  <svg
                    class="h-6 w-6 text-amber-700"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M2 21a8 8 0 0 1 10.821-7.487"></path>
                    <path
                      d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"
                    ></path>
                    <circle cx="10" cy="8" r="5"></circle>
                  </svg>
                </div>
                <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                  <h2
                    class="text-lg font-semibold leading-6 text-zinc-900"
                    id="modal-title"
                  >
                    Editar usuário
                  </h2>
                </div>
              </div>

              <div class="mt-2">
                <form id="editar" type="submit">
                  <div class="mb-3 flex flex-col gap-3">
                    <label for="editarIdLattes">ID Lattes:</label>
                    <input
                      class="bg-gray-100"
                      id="editarIdLattes"
                      type="text"
                      disabled
                    />
                  </div>
                  <div class="mb-3 flex flex-col gap-3">
                    <label for="editarFullName">Nome completo:</label>
                    <input id="editarFullName" type="text" />
                  </div>
                  <div class="mb-3 flex flex-col gap-3">
                    <label for="editarEmail">E-mail:</label>
                    <input id="editarEmail" type="email" />
                  </div>

                  {% if current_user.is_superuser %}
                  <div class="mb-3 flex flex-col gap-2">
                    <div>
                      <label class="mr-1"> Inserir nova senha? </label>
                      <label class="inline-flex cursor-pointer items-center">
                        <span class="me-3 text-sm font-medium text-zinc-700"
                          >Não</span
                        >
                        <input
                          class="peer sr-only"
                          id="checkbox-senha"
                          type="checkbox"
                          checked
                        />
                        <div
                          class="peer relative h-6 w-11 rounded-full bg-gray-300 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-indigo-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rtl:peer-checked:after:-translate-x-full"
                          id="checkbox-senha"
                        ></div>
                        <span class="ms-3 text-sm font-medium text-zinc-700"
                          >Sim</span
                        >
                      </label>
                    </div>
                    <div class="relative w-full">
                      <input
                        id="editar-senha"
                        name="password"
                        type="password"
                        placeholder="Nova senha"
                        required
                      />
                      <button
                        class="absolute inset-y-0 right-0 flex items-center pr-3"
                        id="mostrar-senha"
                        type="button"
                        onclick="mostrarSenhaId('editar-senha')"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke-width="1.5"
                          stroke="rgb(51 53 51)"
                          width="25"
                          height="25"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"
                          ></path>
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                          ></path>
                        </svg>
                      </button>
                    </div>
                  </div>
                  {% endif %}
                  <div id="superuserEditForm">
                    {% if current_user.is_superuser %}
                    <div class="mb-3 flex flex-col gap-2">
                      <label for="tipo-perfil">Tipo de Perfil</label>
                      <div class="relative">
                        <select
                          id="editar-tipo-perfil"
                          class="block w-full appearance-none rounded-md border border-gray-300 py-2 pl-3 pr-10 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-500"
                        >
                          <option>Dono</option>
                          <option>Administrador</option>
                          <option>Usuário comum</option>
                        </select>
                        <svg
                          class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 transform"
                          xmlns="http://www.w3.org/2000/svg"
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="m7 15 5 5 5-5"></path>
                          <path d="m7 9 5-5 5 5"></path>
                        </svg>
                      </div>
                    </div>
                    <div class="mb-3 flex flex-col gap-2">
                      <label for="editar-id-ies">ID IES</label>
                      <div class="relative">
                        <select
                          id="editar-id-ies"
                          class="block w-full appearance-none rounded-md border border-gray-300 py-2 pl-3 pr-10 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-500"
                        >
                          {{html | safe}}
                        </select>
                        <svg
                          class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 transform"
                          xmlns="http://www.w3.org/2000/svg"
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="m7 15 5 5 5-5"></path>
                          <path d="m7 9 5-5 5 5"></path>
                        </svg>
                      </div>
                    </div>
                    {% endif %}
                  </div>
                  <div id="editarAlert"></div>
                </form>
              </div>
            </div>
            <div class="px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
              <button
                class="inline-flex w-full justify-center rounded-lg bg-indigo-400 px-6 py-3 text-sm font-bold text-white shadow-sm hover:bg-indigo-500 sm:ml-3 sm:w-auto"
                id="btn-edita-user"
                type="submit"
                form="editar"
              >
                Salvar
              </button>
              <button
                class="mt-3 inline-flex w-full justify-center rounded-lg border border-gray-300 bg-white px-6 py-3 text-sm font-bold text-zinc-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:mt-0 sm:w-auto"
                id="btn-cancela-edicao-user"
                type="button"
              >
                Cancelar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endblock %} {% block scripts %}
    <script src="{{ url_for('static', filename='ppg/js/scriptsUsuarios.js') | hash_url}}"></script>
    <script src="{{ url_for('static', filename='assets/js/senha.js') | hash_url}}"></script>
    {% endblock %}
  </div>
</div>
